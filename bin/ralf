#!/usr/bin/env ruby
$LOAD_PATH.unshift(File.join(File.dirname(__FILE__), '..', 'lib'))

require 'rubygems'
require 'ralf'

# Bring OptionParser into the namespace
require 'optparse'

begin
  options = {
    :config_file => './ralf.conf',
    :debug => false
  }

  option_parser = OptionParser.new do |opts|
    opts.on("-c FILE","--config FILE") do |file_name|
      options[:config_file] = file_name
    end
    opts.on("--trace") do |debug|
      options[:debug] = true
    end
  end
  option_parser.parse!

  ralf = Ralf.new
  ralf.read_config_from_file(options[:config_file])
  ralf.initialize_s3
  ralf.process_log_bucket

end
